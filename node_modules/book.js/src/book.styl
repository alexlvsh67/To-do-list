// Since everything inside is absolutely positioned.
.book-cover
	position relative

.book-cover img
	width 100%
	display block

// Hide the spine and back until the plugin finishes initializing.
.book-cover
	.book-cover-spine-image,
	.book-cover-back-image
		visibility hidden

// Curve the front and back.
.book-cover-overlay, .book-cover-overlay:before
	border-radius 0 4px 4px 0

.book-cover-front-image
	border-radius 0 3px 3px 0

.book-cover-back-image
	border-radius 3px 0 0 3px

.book-cover-back, .book-cover-back:before
	border-radius 4px 0 0 4px

// Book shadow on the fallback.
.book-cover-overlay
	box-shadow -7px 7px 30px rgba(0, 0, 0, 0.3)

// Book shadow on the full book.
.book-cover-back
	box-shadow 10px 10px 30px rgba(0, 0, 0, 0.3)

// The next two selectors add an overlay and a line to make the cover look more
// like a real cover.
.book-cover-overlay:before
	content ''
	position absolute
	top 0
	left 0
	width 100%
	height 100%
	box-shadow inset 4px 0 10px rgba(0, 0, 0, 0.1)

.book-cover-overlay:after
	content ''
	position absolute
	top 0
	left 3%
	bottom 0
	width 3px
	background rgba(0, 0, 0, 0.06)
	box-shadow 1px 0 3px rgba(255, 255, 255, 0.1)

// Reverse the overlay on the back.
.book-cover-back:before
	box-shadow inset -4px 0 10px rgba(0, 0, 0, 0.1)

.book-cover-back:after
	left auto
	right 3%
	box-shadow -1px 0 3px rgba(255, 255, 255, 0.1)

// Position everything.
.book-cover-front
.book-cover-front-outside
.book-cover-front-inside
.book-cover-back
.book-cover-left
.book-cover-right
.book-cover-top
.book-cover-bottom
	display block
	position absolute
	top 0
	left 0
	width 100%
	height 100%

// Fallback background color when there is no image for the front, back, and/or
// spine.
.book-cover-front-outside,
.book-cover-back
.book-cover-left
	background-color: #222222

// Color of the pages (right, top, and bottom).
.book-cover-right,
.book-cover-top,
.book-cover-bottom
	background-color: #fafafa

// This is the container that turns the whole thing.
.book-cover-inner
	transform-style preserve-3d
	transition transform .5s

	&.hover-ok:hover
		transform rotate3d(0, 1, 0, 35deg)

.book-cover-inner.flipped
	transform translate3d(0, 0, 0px) rotate3d(0, 1, 0, 180deg)

	&.hover-ok:hover
		transform translate3d(0, 0, 0px) rotate3d(0, 1, 0, 155deg)

.book-cover-front
	transform translate3d(0, 0, 0)
	transform-origin 0 50%
	z-index 10

.book-cover-front-inside, .book-cover-front-outside
	backface-visibility hidden
	transform-style preserve-3d
	z-index 1

// Spine width when there is no spine image.
.book-cover-left, .book-cover-right
	width 40px

// Note height and transform need to be calculated with JavaScript.
.book-cover-right
	top 3px
	height 0
	backface-visibility hidden

.book-cover-spine-image
	height 100%
	width auto

// Note: width needs to be calculated with JavaScript.
// Note: .cover-bottom transform needs to be calculated with JavaScript.
.book-cover-top, .book-cover-bottom
	width 0
	backface-visibility hidden

.book-cover.activated
	perspective 1800px

	.book-cover-front-outside
		box-shadow none
